/*! For license information please see main.8a95b3affd75a84a9832.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateportfolio_website("main",{"./src/components/Canvas/Works/index.js":(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var i=t("./node_modules/ogl/src/core/Transform.js"),l=t("./node_modules/ogl/src/extras/Plane.js"),r=t("./node_modules/gsap/index.js"),h=t("./node_modules/lodash/map.js"),a=t.n(h),o=t("./node_modules/prefix/index.js"),n=t.n(o),c=t("./src/components/Canvas/Works/Media.js"),d=t("./src/classes/Detection.js");const m=class{constructor({gl:e,scene:s,sizes:t,index:l=0}){this.id="works",this.gl=e,this.scene=s,this.sizes=t,this.group=new i.Transform,this.transformPrefix=n()("transform"),this.galleryElement=document.querySelector(".works__gallery"),this.galleryWrapperElement=document.querySelector(".works__gallery__wrapper"),this.categoriesElementsClass="works__category__wrapper",this.categoriesElements=document.querySelectorAll(`.${this.categoriesElementsClass}`),this.categoriesElementsActive=`${this.categoriesElementsClass}--active`,this.headerTitleClass="works__header__title__wrapper__outer",this.headerTitleCircleClass="works__header__title__circle",this.headerTitleElements=document.querySelectorAll(`.${this.headerTitleClass}`),this.headerTitleCircleElements=document.querySelectorAll(`.${this.headerTitleCircleClass}`),this.headerTitleActive=`${this.headerTitleClass}--active`,this.mediasElements=document.querySelectorAll(".works__gallery__media"),this.mediasLink=document.querySelectorAll(".works__gallery__link"),this.columnGap=2*parseFloat(window.getComputedStyle(this.mediasLink[0]).marginRight.replace("px","")),this.index=l,this.hasMoved=!1,this.createGeometry(),this.createGallery(),this.scroll={current:-(this.medias[0].element.clientWidth+this.columnGap)*this.index,target:-(this.medias[0].element.clientWidth+this.columnGap)*this.index,lerp:.1,velocity:1},this.speed={current:0,target:0,lerp:.1},this.onResize({sizes:this.sizes}),this.group.setParent(this.scene),this.onChange(this.index),this.show()}createGeometry(){this.geometry=new l.Plane(this.gl,{heightSegments:20,widthSegments:20})}createGallery(){this.medias=a()(this.mediasElements,((e,s)=>new c.default({element:e,geometry:this.geometry,index:s,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){a()(this.medias,(e=>e.show()))}hide(){a()(this.medias,(e=>e.hide()))}onResize(e){this.sizes=e.sizes,this.columnGap=2*parseFloat(window.getComputedStyle(this.mediasLink[0]).marginRight.replace("px","")),this.bounds=this.galleryWrapperElement.getBoundingClientRect(),this.scroll.last=this.scroll.target=-(this.medias[0].element.clientWidth+this.columnGap)*this.index,a()(this.medias,(s=>s.onResize(e,this.scroll))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:e,y:s}){}onTouchMove({x:e,y:s}){if(!d.default.isPhone())return;this.hasMoved=!0;const t=e.start-e.end;this.scroll.target=this.scroll.last-t}onTouchUp({x:e,y:s}){}onWheel({pixelY:e}){this.hasMoved=!0,this.scroll.target+=e}onChange(e){this.index=e;const s=parseInt(this.mediasElements[this.index].getAttribute("data-index"));a()(this.categoriesElements,((e,t)=>{t===s?(e.classList.add(this.categoriesElementsActive),e.classList.add(`${this.categoriesElementsClass}--${t}`)):(e.classList.remove(this.categoriesElementsActive),e.classList.remove(`${this.categoriesElementsClass}--${t}`))})),a()(this.headerTitleElements,((e,s)=>{s===this.index?e.classList.add(this.headerTitleActive):e.classList.remove(this.headerTitleActive)}))}update(){this.speed.target=.01*(this.scroll.target-this.scroll.current),this.speed.current=r.default.utils.interpolate(this.speed.current,this.speed.target,this.speed.lerp),this.scroll.target=r.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=r.default.utils.interpolate(this.scroll.current,this.scroll.target,this.hasMoved?this.scroll.lerp:0),this.galleryElement.style[this.transformPrefix]=`translateX(${this.hasMoved?this.scroll.current:0}px)`,this.scroll.last<this.scroll.current?this.scroll.direction="right":this.scroll.last>this.scroll.current&&(this.scroll.direction="left"),this.scroll.last=this.scroll.current;const e=Math.floor(Math.abs((this.scroll.current-this.medias[0].bounds.width/2)/this.scroll.limit)*(this.medias.length-1));this.index!==e&&this.onChange(e),a()(this.medias,(e=>{e.update(this.scroll.current,this.speed.current,this.index)}))}destroy(){this.scene.removeChild(this.group)}}}},(function(e){e.h=()=>"2c2f3602b285b86979e5"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OEIsT0FBT0MsUUFBUy9CLEtBQUtzQyxNQUFNUCxRQUFTL0IsS0FBS0QsTUFBM0QsR0FFRCxDQUtEb0YsVUFDQ25GLEtBQUtILE1BQU11RixZQUFZcEYsS0FBS0UsTUFDNUIsa0JDdFFGbUYsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby13ZWJzaXRlLy4vc3JjL2NvbXBvbmVudHMvQ2FudmFzL1dvcmtzL2luZGV4LmpzIiwid2VicGFjazovL3BvcnRmb2xpby13ZWJzaXRlL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJ1xuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcbmltcG9ydCBtYXAgZnJvbSAnbG9kYXNoL21hcCdcbmltcG9ydCBQcmVmaXggZnJvbSAncHJlZml4J1xuXG5pbXBvcnQgTWVkaWEgZnJvbSAnLi9NZWRpYSdcblxuaW1wb3J0IERldGVjdGlvbiBmcm9tICdjbGFzc2VzL0RldGVjdGlvbidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuXHRjb25zdHJ1Y3Rvcih7IGdsLCBzY2VuZSwgc2l6ZXMsIGluZGV4ID0gMCB9KSB7XG5cdFx0dGhpcy5pZCA9ICd3b3Jrcydcblx0XHR0aGlzLmdsID0gZ2xcblx0XHR0aGlzLnNjZW5lID0gc2NlbmVcblx0XHR0aGlzLnNpemVzID0gc2l6ZXNcblxuXHRcdHRoaXMuZ3JvdXAgPSBuZXcgVHJhbnNmb3JtKClcblxuXHRcdHRoaXMudHJhbnNmb3JtUHJlZml4ID0gUHJlZml4KCd0cmFuc2Zvcm0nKVxuXG5cdFx0dGhpcy5nYWxsZXJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc19fZ2FsbGVyeScpXG5cdFx0dGhpcy5nYWxsZXJ5V3JhcHBlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0Jy53b3Jrc19fZ2FsbGVyeV9fd3JhcHBlcidcblx0XHQpXG5cblx0XHR0aGlzLmNhdGVnb3JpZXNFbGVtZW50c0NsYXNzID0gJ3dvcmtzX19jYXRlZ29yeV9fd3JhcHBlcidcblx0XHR0aGlzLmNhdGVnb3JpZXNFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHRgLiR7dGhpcy5jYXRlZ29yaWVzRWxlbWVudHNDbGFzc31gXG5cdFx0KVxuXHRcdHRoaXMuY2F0ZWdvcmllc0VsZW1lbnRzQWN0aXZlID0gYCR7dGhpcy5jYXRlZ29yaWVzRWxlbWVudHNDbGFzc30tLWFjdGl2ZWBcblxuXHRcdHRoaXMuaGVhZGVyVGl0bGVDbGFzcyA9ICd3b3Jrc19faGVhZGVyX190aXRsZV9fd3JhcHBlcl9fb3V0ZXInXG5cdFx0dGhpcy5oZWFkZXJUaXRsZUNpcmNsZUNsYXNzID0gJ3dvcmtzX19oZWFkZXJfX3RpdGxlX19jaXJjbGUnXG5cdFx0dGhpcy5oZWFkZXJUaXRsZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcblx0XHRcdGAuJHt0aGlzLmhlYWRlclRpdGxlQ2xhc3N9YFxuXHRcdClcblx0XHR0aGlzLmhlYWRlclRpdGxlQ2lyY2xlRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0YC4ke3RoaXMuaGVhZGVyVGl0bGVDaXJjbGVDbGFzc31gXG5cdFx0KVxuXHRcdHRoaXMuaGVhZGVyVGl0bGVBY3RpdmUgPSBgJHt0aGlzLmhlYWRlclRpdGxlQ2xhc3N9LS1hY3RpdmVgXG5cblx0XHR0aGlzLm1lZGlhc0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndvcmtzX19nYWxsZXJ5X19tZWRpYScpXG5cdFx0dGhpcy5tZWRpYXNMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndvcmtzX19nYWxsZXJ5X19saW5rJylcblxuXHRcdC8vVE9ETzogYWRkIGNhc2UgZm9yIElFLCBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNDI3NTMwNC9ob3ctdG8tZ2V0LW1hcmdpbi12YWx1ZS1vZi1hLWRpdi1pbi1wbGFpbi1qYXZhc2NyaXB0XG5cdFx0dGhpcy5jb2x1bW5HYXAgPVxuXHRcdFx0cGFyc2VGbG9hdChcblx0XHRcdFx0d2luZG93XG5cdFx0XHRcdFx0LmdldENvbXB1dGVkU3R5bGUodGhpcy5tZWRpYXNMaW5rWzBdKVxuXHRcdFx0XHRcdC5tYXJnaW5SaWdodC5yZXBsYWNlKCdweCcsICcnKVxuXHRcdFx0KSAqIDJcblxuXHRcdHRoaXMuaW5kZXggPSBpbmRleFxuXHRcdHRoaXMuaGFzTW92ZWQgPSBmYWxzZVxuXG5cdFx0dGhpcy5jcmVhdGVHZW9tZXRyeSgpXG5cdFx0dGhpcy5jcmVhdGVHYWxsZXJ5KClcblxuXHRcdHRoaXMuc2Nyb2xsID0ge1xuXHRcdFx0Y3VycmVudDpcblx0XHRcdFx0LSh0aGlzLm1lZGlhc1swXS5lbGVtZW50LmNsaWVudFdpZHRoICsgdGhpcy5jb2x1bW5HYXApICogdGhpcy5pbmRleCxcblx0XHRcdHRhcmdldDpcblx0XHRcdFx0LSh0aGlzLm1lZGlhc1swXS5lbGVtZW50LmNsaWVudFdpZHRoICsgdGhpcy5jb2x1bW5HYXApICogdGhpcy5pbmRleCxcblx0XHRcdGxlcnA6IDAuMSxcblx0XHRcdHZlbG9jaXR5OiAxLFxuXHRcdH1cblxuXHRcdHRoaXMuc3BlZWQgPSB7XG5cdFx0XHRjdXJyZW50OiAwLFxuXHRcdFx0dGFyZ2V0OiAwLFxuXHRcdFx0bGVycDogMC4xLFxuXHRcdH1cblxuXHRcdHRoaXMub25SZXNpemUoeyBzaXplczogdGhpcy5zaXplcyB9KVxuXG5cdFx0dGhpcy5ncm91cC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcblx0XHR0aGlzLm9uQ2hhbmdlKHRoaXMuaW5kZXgpXG5cblx0XHR0aGlzLnNob3coKVxuXHR9XG5cblx0Y3JlYXRlR2VvbWV0cnkoKSB7XG5cdFx0dGhpcy5nZW9tZXRyeSA9IG5ldyBQbGFuZSh0aGlzLmdsLCB7XG5cdFx0XHRoZWlnaHRTZWdtZW50czogMjAsXG5cdFx0XHR3aWR0aFNlZ21lbnRzOiAyMCxcblx0XHR9KVxuXHR9XG5cblx0Y3JlYXRlR2FsbGVyeSgpIHtcblx0XHR0aGlzLm1lZGlhcyA9IG1hcCh0aGlzLm1lZGlhc0VsZW1lbnRzLCAoZWxlbWVudCwgaW5kZXgpID0+IHtcblx0XHRcdHJldHVybiBuZXcgTWVkaWEoe1xuXHRcdFx0XHRlbGVtZW50LFxuXHRcdFx0XHRnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcblx0XHRcdFx0aW5kZXgsXG5cdFx0XHRcdGdsOiB0aGlzLmdsLFxuXHRcdFx0XHRzY2VuZTogdGhpcy5ncm91cCxcblx0XHRcdFx0c2l6ZXM6IHRoaXMuc2l6ZXMsXG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHQvKipcblx0ICogQW5pbWF0aW9uc1xuXHQgKi9cblx0c2hvdygpIHtcblx0XHRtYXAodGhpcy5tZWRpYXMsIChtZWRpYSkgPT4gbWVkaWEuc2hvdygpKVxuXHR9XG5cblx0aGlkZSgpIHtcblx0XHRtYXAodGhpcy5tZWRpYXMsIChtZWRpYSkgPT4gbWVkaWEuaGlkZSgpKVxuXHR9XG5cblx0LyoqXG5cdCAqIEV2ZW50c1xuXHQgKi9cblxuXHRvblJlc2l6ZShldmVudCkge1xuXHRcdHRoaXMuc2l6ZXMgPSBldmVudC5zaXplc1xuXG5cdFx0dGhpcy5jb2x1bW5HYXAgPVxuXHRcdFx0cGFyc2VGbG9hdChcblx0XHRcdFx0d2luZG93XG5cdFx0XHRcdFx0LmdldENvbXB1dGVkU3R5bGUodGhpcy5tZWRpYXNMaW5rWzBdKVxuXHRcdFx0XHRcdC5tYXJnaW5SaWdodC5yZXBsYWNlKCdweCcsICcnKVxuXHRcdFx0KSAqIDJcblxuXHRcdHRoaXMuYm91bmRzID0gdGhpcy5nYWxsZXJ5V3JhcHBlckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuXHRcdC8vIHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC50YXJnZXQgPSAwXG5cdFx0dGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLnRhcmdldCA9XG5cdFx0XHQtKHRoaXMubWVkaWFzWzBdLmVsZW1lbnQuY2xpZW50V2lkdGggKyB0aGlzLmNvbHVtbkdhcCkgKiB0aGlzLmluZGV4XG5cblx0XHRtYXAodGhpcy5tZWRpYXMsIChtZWRpYSkgPT4gbWVkaWEub25SZXNpemUoZXZlbnQsIHRoaXMuc2Nyb2xsKSlcblxuXHRcdHRoaXMuc2Nyb2xsLmxpbWl0ID0gdGhpcy5ib3VuZHMud2lkdGggLSB0aGlzLm1lZGlhc1swXS5lbGVtZW50LmNsaWVudFdpZHRoXG5cdH1cblxuXHRvblRvdWNoRG93bih7IHgsIHkgfSkge1xuXHRcdC8vIHRoaXMuaGFzTW92ZWQgPSB0cnVlXG5cdFx0Ly8gdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLmN1cnJlbnRcblx0fVxuXG5cdG9uVG91Y2hNb3ZlKHsgeCwgeSB9KSB7XG5cdFx0aWYgKCFEZXRlY3Rpb24uaXNQaG9uZSgpKSByZXR1cm5cblx0XHR0aGlzLmhhc01vdmVkID0gdHJ1ZVxuXHRcdGNvbnN0IGRpc3RhbmNlID0geC5zdGFydCAtIHguZW5kXG5cdFx0dGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwubGFzdCAtIGRpc3RhbmNlXG5cdH1cblxuXHRvblRvdWNoVXAoeyB4LCB5IH0pIHt9XG5cblx0b25XaGVlbCh7IHBpeGVsWSB9KSB7XG5cdFx0dGhpcy5oYXNNb3ZlZCA9IHRydWVcblx0XHR0aGlzLnNjcm9sbC50YXJnZXQgKz0gcGl4ZWxZXG5cdH1cblxuXHQvKipcblx0ICogQ2hhbmdlZFxuXHQgKi9cblx0b25DaGFuZ2UoaW5kZXgpIHtcblx0XHR0aGlzLmluZGV4ID0gaW5kZXhcblxuXHRcdGNvbnN0IHNlbGVjdGVkQ2F0ZWdvcnkgPSBwYXJzZUludChcblx0XHRcdHRoaXMubWVkaWFzRWxlbWVudHNbdGhpcy5pbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4Jylcblx0XHQpXG5cblx0XHRtYXAodGhpcy5jYXRlZ29yaWVzRWxlbWVudHMsIChlbGVtZW50LCBlbGVtZW50SW5kZXgpID0+IHtcblx0XHRcdGlmIChlbGVtZW50SW5kZXggPT09IHNlbGVjdGVkQ2F0ZWdvcnkpIHtcblx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuY2F0ZWdvcmllc0VsZW1lbnRzQWN0aXZlKVxuXHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQoXG5cdFx0XHRcdFx0YCR7dGhpcy5jYXRlZ29yaWVzRWxlbWVudHNDbGFzc30tLSR7ZWxlbWVudEluZGV4fWBcblx0XHRcdFx0KVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY2F0ZWdvcmllc0VsZW1lbnRzQWN0aXZlKVxuXHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXG5cdFx0XHRcdFx0YCR7dGhpcy5jYXRlZ29yaWVzRWxlbWVudHNDbGFzc30tLSR7ZWxlbWVudEluZGV4fWBcblx0XHRcdFx0KVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0bWFwKHRoaXMuaGVhZGVyVGl0bGVFbGVtZW50cywgKGVsZW1lbnQsIGVsZW1lbnRJbmRleCkgPT4ge1xuXHRcdFx0aWYgKGVsZW1lbnRJbmRleCA9PT0gdGhpcy5pbmRleCkge1xuXHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5oZWFkZXJUaXRsZUFjdGl2ZSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmhlYWRlclRpdGxlQWN0aXZlKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblxuXHQvKipcblx0ICogTG9vcFxuXHQgKi9cblxuXHR1cGRhdGUoKSB7XG5cdFx0dGhpcy5zcGVlZC50YXJnZXQgPSAodGhpcy5zY3JvbGwudGFyZ2V0IC0gdGhpcy5zY3JvbGwuY3VycmVudCkgKiAwLjAxXG5cblx0XHR0aGlzLnNwZWVkLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKFxuXHRcdFx0dGhpcy5zcGVlZC5jdXJyZW50LFxuXHRcdFx0dGhpcy5zcGVlZC50YXJnZXQsXG5cdFx0XHR0aGlzLnNwZWVkLmxlcnBcblx0XHQpXG5cblx0XHR0aGlzLnNjcm9sbC50YXJnZXQgPSBHU0FQLnV0aWxzLmNsYW1wKFxuXHRcdFx0LXRoaXMuc2Nyb2xsLmxpbWl0LFxuXHRcdFx0MCxcblx0XHRcdHRoaXMuc2Nyb2xsLnRhcmdldFxuXHRcdClcblxuXHRcdHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKFxuXHRcdFx0dGhpcy5zY3JvbGwuY3VycmVudCxcblx0XHRcdHRoaXMuc2Nyb2xsLnRhcmdldCxcblx0XHRcdHRoaXMuaGFzTW92ZWQgPyB0aGlzLnNjcm9sbC5sZXJwIDogMFxuXHRcdClcblxuXHRcdHRoaXMuZ2FsbGVyeUVsZW1lbnQuc3R5bGVbdGhpcy50cmFuc2Zvcm1QcmVmaXhdID0gYHRyYW5zbGF0ZVgoJHtcblx0XHRcdHRoaXMuaGFzTW92ZWQgPyB0aGlzLnNjcm9sbC5jdXJyZW50IDogMFxuXHRcdH1weClgXG5cblx0XHRpZiAodGhpcy5zY3JvbGwubGFzdCA8IHRoaXMuc2Nyb2xsLmN1cnJlbnQpIHtcblx0XHRcdHRoaXMuc2Nyb2xsLmRpcmVjdGlvbiA9ICdyaWdodCdcblx0XHR9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsLmxhc3QgPiB0aGlzLnNjcm9sbC5jdXJyZW50KSB7XG5cdFx0XHR0aGlzLnNjcm9sbC5kaXJlY3Rpb24gPSAnbGVmdCdcblx0XHR9XG5cblx0XHR0aGlzLnNjcm9sbC5sYXN0ID0gdGhpcy5zY3JvbGwuY3VycmVudFxuXG5cdFx0Y29uc3QgaW5kZXggPSBNYXRoLmZsb29yKFxuXHRcdFx0TWF0aC5hYnMoXG5cdFx0XHRcdCh0aGlzLnNjcm9sbC5jdXJyZW50IC0gdGhpcy5tZWRpYXNbMF0uYm91bmRzLndpZHRoIC8gMikgL1xuXHRcdFx0XHRcdHRoaXMuc2Nyb2xsLmxpbWl0XG5cdFx0XHQpICpcblx0XHRcdFx0KHRoaXMubWVkaWFzLmxlbmd0aCAtIDEpXG5cdFx0KVxuXG5cdFx0aWYgKHRoaXMuaW5kZXggIT09IGluZGV4KSB7XG5cdFx0XHR0aGlzLm9uQ2hhbmdlKGluZGV4KVxuXHRcdH1cblxuXHRcdG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiB7XG5cdFx0XHQvLyB0aGlzIGlzIGZvciBpbmZpbml0ZSBzY3JvbGxpbmdcblx0XHRcdC8vIGNvbnN0IHNjYWxlWCA9IG1lZGlhLm1lc2guc2NhbGUueCAvIDJcblxuXHRcdFx0Ly8gaWYgKHRoaXMuc2Nyb2xsLmRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG5cdFx0XHQvLyBcdGNvbnN0IHggPSBtZWRpYS5tZXNoLnBvc2l0aW9uLnggKyBzY2FsZVhcblx0XHRcdC8vIFx0aWYgKHggPCAtdGhpcy5zaXplcy53aWR0aCAvIDIpIHtcblx0XHRcdC8vIFx0XHRtZWRpYS5leHRyYS54ICs9IHRoaXMud2lkdGhcblx0XHRcdC8vIFx0fVxuXHRcdFx0Ly8gfSBlbHNlIGlmICh0aGlzLnNjcm9sbC5kaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcblx0XHRcdC8vIFx0Y29uc3QgeCA9IG1lZGlhLm1lc2gucG9zaXRpb24ueCAtIHNjYWxlWFxuXHRcdFx0Ly8gXHRpZiAoeCA+IHRoaXMuc2l6ZXMud2lkdGggLyAyKSB7XG5cdFx0XHQvLyBcdFx0bWVkaWEuZXh0cmEueCAtPSB0aGlzLndpZHRoXG5cdFx0XHQvLyBcdH1cblx0XHRcdC8vIH1cblxuXHRcdFx0bWVkaWEudXBkYXRlKHRoaXMuc2Nyb2xsLmN1cnJlbnQsIHRoaXMuc3BlZWQuY3VycmVudCwgdGhpcy5pbmRleClcblx0XHR9KVxuXHR9XG5cblx0LyoqXG5cdCAqIERlc3Ryb3lcblx0ICovXG5cdGRlc3Ryb3koKSB7XG5cdFx0dGhpcy5zY2VuZS5yZW1vdmVDaGlsZCh0aGlzLmdyb3VwKVxuXHR9XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCIyYzJmMzYwMmIyODViODY5NzllNVwiKSJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsImdsIiwic2NlbmUiLCJzaXplcyIsImluZGV4IiwidGhpcyIsImlkIiwiZ3JvdXAiLCJUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1QcmVmaXgiLCJQcmVmaXgiLCJnYWxsZXJ5RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdhbGxlcnlXcmFwcGVyRWxlbWVudCIsImNhdGVnb3JpZXNFbGVtZW50c0NsYXNzIiwiY2F0ZWdvcmllc0VsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImNhdGVnb3JpZXNFbGVtZW50c0FjdGl2ZSIsImhlYWRlclRpdGxlQ2xhc3MiLCJoZWFkZXJUaXRsZUNpcmNsZUNsYXNzIiwiaGVhZGVyVGl0bGVFbGVtZW50cyIsImhlYWRlclRpdGxlQ2lyY2xlRWxlbWVudHMiLCJoZWFkZXJUaXRsZUFjdGl2ZSIsIm1lZGlhc0VsZW1lbnRzIiwibWVkaWFzTGluayIsImNvbHVtbkdhcCIsInBhcnNlRmxvYXQiLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwibWFyZ2luUmlnaHQiLCJyZXBsYWNlIiwiaGFzTW92ZWQiLCJjcmVhdGVHZW9tZXRyeSIsImNyZWF0ZUdhbGxlcnkiLCJzY3JvbGwiLCJjdXJyZW50IiwibWVkaWFzIiwiZWxlbWVudCIsImNsaWVudFdpZHRoIiwidGFyZ2V0IiwibGVycCIsInZlbG9jaXR5Iiwic3BlZWQiLCJvblJlc2l6ZSIsInNldFBhcmVudCIsIm9uQ2hhbmdlIiwic2hvdyIsImdlb21ldHJ5IiwiUGxhbmUiLCJoZWlnaHRTZWdtZW50cyIsIndpZHRoU2VnbWVudHMiLCJtYXAiLCJNZWRpYSIsIm1lZGlhIiwiaGlkZSIsImV2ZW50IiwiYm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibGFzdCIsImxpbWl0Iiwid2lkdGgiLCJvblRvdWNoRG93biIsIngiLCJ5Iiwib25Ub3VjaE1vdmUiLCJEZXRlY3Rpb24iLCJkaXN0YW5jZSIsInN0YXJ0IiwiZW5kIiwib25Ub3VjaFVwIiwib25XaGVlbCIsInBpeGVsWSIsInNlbGVjdGVkQ2F0ZWdvcnkiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImVsZW1lbnRJbmRleCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInVwZGF0ZSIsIkdTQVAiLCJzdHlsZSIsImRpcmVjdGlvbiIsIk1hdGgiLCJmbG9vciIsImFicyIsImxlbmd0aCIsImRlc3Ryb3kiLCJyZW1vdmVDaGlsZCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==