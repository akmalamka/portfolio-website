/*! For license information please see main.c812600c0283815d67b6.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateportfolio_website("main",{"./src/components/Canvas/Works/index.js":(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var i=t("./node_modules/ogl/src/core/Transform.js"),l=t("./node_modules/ogl/src/extras/Plane.js"),r=t("./node_modules/gsap/index.js"),h=t("./node_modules/lodash/map.js"),a=t.n(h),o=t("./node_modules/prefix/index.js"),n=t.n(o),c=t("./src/components/Canvas/Works/Media.js");const d=class{constructor({gl:e,scene:s,sizes:t,index:l=0}){this.id="works",this.gl=e,this.scene=s,this.sizes=t,this.group=new i.Transform,this.transformPrefix=n()("transform"),this.galleryElement=document.querySelector(".works__gallery"),this.galleryWrapperElement=document.querySelector(".works__gallery__wrapper"),this.categoriesElementsClass="works__category__wrapper",this.categoriesElements=document.querySelectorAll(`.${this.categoriesElementsClass}`),this.categoriesElementsActive=`${this.categoriesElementsClass}--active`,this.headerTitleClass="works__header__title__wrapper",this.headerTitleCircleClass="works__header__title__circle",this.headerTitleElements=document.querySelectorAll(`.${this.headerTitleClass}`),this.headerTitleCircleElements=document.querySelectorAll(`.${this.headerTitleCircleClass}`),this.headerTitleActive=`${this.headerTitleClass}--active`,this.mediasElements=document.querySelectorAll(".works__gallery__media"),this.mediasLink=document.querySelectorAll(".works__gallery__link"),this.columnGap=2*parseFloat(window.getComputedStyle(this.mediasLink[0]).marginRight.replace("px","")),this.index=l,this.hasMoved=!1,this.createGeometry(),this.createGallery(),this.scroll={current:-(this.medias[0].element.clientWidth+this.columnGap)*this.index,target:-(this.medias[0].element.clientWidth+this.columnGap)*this.index,lerp:.1,velocity:1},this.speed={current:0,target:0,lerp:.1},this.onResize({sizes:this.sizes}),this.group.setParent(this.scene),this.onChange(this.index),this.show()}createGeometry(){this.geometry=new l.Plane(this.gl,{heightSegments:20,widthSegments:20})}createGallery(){this.medias=a()(this.mediasElements,((e,s)=>new c.default({element:e,geometry:this.geometry,index:s,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){a()(this.medias,(e=>e.show()))}hide(){a()(this.medias,(e=>e.hide()))}onResize(e){this.sizes=e.sizes,this.columnGap=2*parseFloat(window.getComputedStyle(this.mediasLink[0]).marginRight.replace("px","")),this.bounds=this.galleryWrapperElement.getBoundingClientRect(),this.scroll.last=this.scroll.target=-(this.medias[0].element.clientWidth+this.columnGap)*this.index,a()(this.medias,(s=>s.onResize(e,this.scroll))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:e,y:s}){}onTouchMove({x:e,y:s}){this.hasMoved=!0;const t=e.start-e.end;this.scroll.target=this.scroll.last-t}onTouchUp({x:e,y:s}){}onWheel({pixelY:e}){this.hasMoved=!0,this.scroll.target+=e}onChange(e){this.index=e;const s=parseInt(this.mediasElements[this.index].getAttribute("data-index"));a()(this.categoriesElements,((e,t)=>{t===s?(e.classList.add(this.categoriesElementsActive),e.classList.add(`${this.categoriesElementsClass}--${t}`)):(e.classList.remove(this.categoriesElementsActive),e.classList.remove(`${this.categoriesElementsClass}--${t}`))})),a()(this.headerTitleElements,((e,s)=>{s===this.index?e.classList.add(this.headerTitleActive):e.classList.remove(this.headerTitleActive)}))}update(){this.speed.target=.01*(this.scroll.target-this.scroll.current),this.speed.current=r.default.utils.interpolate(this.speed.current,this.speed.target,this.speed.lerp),this.scroll.target=r.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=r.default.utils.interpolate(this.scroll.current,this.scroll.target,this.hasMoved?this.scroll.lerp:0),this.galleryElement.style[this.transformPrefix]=`translateX(${this.hasMoved?this.scroll.current:0}px)`,this.scroll.last<this.scroll.current?this.scroll.direction="right":this.scroll.last>this.scroll.current&&(this.scroll.direction="left"),this.scroll.last=this.scroll.current;const e=Math.floor(Math.abs((this.scroll.current-this.medias[0].bounds.width/2)/this.scroll.limit)*(this.medias.length-1));this.index!==e&&this.onChange(e),a()(this.medias,(e=>{e.update(this.scroll.current,this.speed.current,this.index)}))}destroy(){this.scene.removeChild(this.group)}}}},(function(e){e.h=()=>"42fb37590011f33caf7c"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTL0IsS0FBS0QsTUFBM0QsR0FFRCxDQUtEbUYsVUFDQ2xGLEtBQUtILE1BQU1zRixZQUFZbkYsS0FBS0UsTUFDNUIsa0JDblFGa0YsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby13ZWJzaXRlLy4vc3JjL2NvbXBvbmVudHMvQ2FudmFzL1dvcmtzL2luZGV4LmpzIiwid2VicGFjazovL3BvcnRmb2xpby13ZWJzaXRlL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJ1xuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcbmltcG9ydCBtYXAgZnJvbSAnbG9kYXNoL21hcCdcbmltcG9ydCBQcmVmaXggZnJvbSAncHJlZml4J1xuXG5pbXBvcnQgTWVkaWEgZnJvbSAnLi9NZWRpYSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuXHRjb25zdHJ1Y3Rvcih7IGdsLCBzY2VuZSwgc2l6ZXMsIGluZGV4ID0gMCB9KSB7XG5cdFx0dGhpcy5pZCA9ICd3b3Jrcydcblx0XHR0aGlzLmdsID0gZ2xcblx0XHR0aGlzLnNjZW5lID0gc2NlbmVcblx0XHR0aGlzLnNpemVzID0gc2l6ZXNcblxuXHRcdHRoaXMuZ3JvdXAgPSBuZXcgVHJhbnNmb3JtKClcblxuXHRcdHRoaXMudHJhbnNmb3JtUHJlZml4ID0gUHJlZml4KCd0cmFuc2Zvcm0nKVxuXG5cdFx0dGhpcy5nYWxsZXJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc19fZ2FsbGVyeScpXG5cdFx0dGhpcy5nYWxsZXJ5V3JhcHBlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0Jy53b3Jrc19fZ2FsbGVyeV9fd3JhcHBlcidcblx0XHQpXG5cblx0XHR0aGlzLmNhdGVnb3JpZXNFbGVtZW50c0NsYXNzID0gJ3dvcmtzX19jYXRlZ29yeV9fd3JhcHBlcidcblx0XHR0aGlzLmNhdGVnb3JpZXNFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHRgLiR7dGhpcy5jYXRlZ29yaWVzRWxlbWVudHNDbGFzc31gXG5cdFx0KVxuXHRcdHRoaXMuY2F0ZWdvcmllc0VsZW1lbnRzQWN0aXZlID0gYCR7dGhpcy5jYXRlZ29yaWVzRWxlbWVudHNDbGFzc30tLWFjdGl2ZWBcblxuXHRcdHRoaXMuaGVhZGVyVGl0bGVDbGFzcyA9ICd3b3Jrc19faGVhZGVyX190aXRsZV9fd3JhcHBlcidcblx0XHR0aGlzLmhlYWRlclRpdGxlQ2lyY2xlQ2xhc3MgPSAnd29ya3NfX2hlYWRlcl9fdGl0bGVfX2NpcmNsZSdcblx0XHR0aGlzLmhlYWRlclRpdGxlRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0YC4ke3RoaXMuaGVhZGVyVGl0bGVDbGFzc31gXG5cdFx0KVxuXHRcdHRoaXMuaGVhZGVyVGl0bGVDaXJjbGVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHRgLiR7dGhpcy5oZWFkZXJUaXRsZUNpcmNsZUNsYXNzfWBcblx0XHQpXG5cdFx0dGhpcy5oZWFkZXJUaXRsZUFjdGl2ZSA9IGAke3RoaXMuaGVhZGVyVGl0bGVDbGFzc30tLWFjdGl2ZWBcblxuXHRcdHRoaXMubWVkaWFzRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud29ya3NfX2dhbGxlcnlfX21lZGlhJylcblx0XHR0aGlzLm1lZGlhc0xpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud29ya3NfX2dhbGxlcnlfX2xpbmsnKVxuXG5cdFx0Ly9UT0RPOiBhZGQgY2FzZSBmb3IgSUUsIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0Mjc1MzA0L2hvdy10by1nZXQtbWFyZ2luLXZhbHVlLW9mLWEtZGl2LWluLXBsYWluLWphdmFzY3JpcHRcblx0XHR0aGlzLmNvbHVtbkdhcCA9XG5cdFx0XHRwYXJzZUZsb2F0KFxuXHRcdFx0XHR3aW5kb3dcblx0XHRcdFx0XHQuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm1lZGlhc0xpbmtbMF0pXG5cdFx0XHRcdFx0Lm1hcmdpblJpZ2h0LnJlcGxhY2UoJ3B4JywgJycpXG5cdFx0XHQpICogMlxuXG5cdFx0dGhpcy5pbmRleCA9IGluZGV4XG5cdFx0dGhpcy5oYXNNb3ZlZCA9IGZhbHNlXG5cblx0XHR0aGlzLmNyZWF0ZUdlb21ldHJ5KClcblx0XHR0aGlzLmNyZWF0ZUdhbGxlcnkoKVxuXG5cdFx0dGhpcy5zY3JvbGwgPSB7XG5cdFx0XHRjdXJyZW50OlxuXHRcdFx0XHQtKHRoaXMubWVkaWFzWzBdLmVsZW1lbnQuY2xpZW50V2lkdGggKyB0aGlzLmNvbHVtbkdhcCkgKiB0aGlzLmluZGV4LFxuXHRcdFx0dGFyZ2V0OlxuXHRcdFx0XHQtKHRoaXMubWVkaWFzWzBdLmVsZW1lbnQuY2xpZW50V2lkdGggKyB0aGlzLmNvbHVtbkdhcCkgKiB0aGlzLmluZGV4LFxuXHRcdFx0bGVycDogMC4xLFxuXHRcdFx0dmVsb2NpdHk6IDEsXG5cdFx0fVxuXG5cdFx0dGhpcy5zcGVlZCA9IHtcblx0XHRcdGN1cnJlbnQ6IDAsXG5cdFx0XHR0YXJnZXQ6IDAsXG5cdFx0XHRsZXJwOiAwLjEsXG5cdFx0fVxuXG5cdFx0dGhpcy5vblJlc2l6ZSh7IHNpemVzOiB0aGlzLnNpemVzIH0pXG5cblx0XHR0aGlzLmdyb3VwLnNldFBhcmVudCh0aGlzLnNjZW5lKVxuXHRcdHRoaXMub25DaGFuZ2UodGhpcy5pbmRleClcblxuXHRcdHRoaXMuc2hvdygpXG5cdH1cblxuXHRjcmVhdGVHZW9tZXRyeSgpIHtcblx0XHR0aGlzLmdlb21ldHJ5ID0gbmV3IFBsYW5lKHRoaXMuZ2wsIHtcblx0XHRcdGhlaWdodFNlZ21lbnRzOiAyMCxcblx0XHRcdHdpZHRoU2VnbWVudHM6IDIwLFxuXHRcdH0pXG5cdH1cblxuXHRjcmVhdGVHYWxsZXJ5KCkge1xuXHRcdHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFzRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBNZWRpYSh7XG5cdFx0XHRcdGVsZW1lbnQsXG5cdFx0XHRcdGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxuXHRcdFx0XHRpbmRleCxcblx0XHRcdFx0Z2w6IHRoaXMuZ2wsXG5cdFx0XHRcdHNjZW5lOiB0aGlzLmdyb3VwLFxuXHRcdFx0XHRzaXplczogdGhpcy5zaXplcyxcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdC8qKlxuXHQgKiBBbmltYXRpb25zXG5cdCAqL1xuXHRzaG93KCkge1xuXHRcdG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiBtZWRpYS5zaG93KCkpXG5cdH1cblxuXHRoaWRlKCkge1xuXHRcdG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiBtZWRpYS5oaWRlKCkpXG5cdH1cblxuXHQvKipcblx0ICogRXZlbnRzXG5cdCAqL1xuXG5cdG9uUmVzaXplKGV2ZW50KSB7XG5cdFx0dGhpcy5zaXplcyA9IGV2ZW50LnNpemVzXG5cblx0XHR0aGlzLmNvbHVtbkdhcCA9XG5cdFx0XHRwYXJzZUZsb2F0KFxuXHRcdFx0XHR3aW5kb3dcblx0XHRcdFx0XHQuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm1lZGlhc0xpbmtbMF0pXG5cdFx0XHRcdFx0Lm1hcmdpblJpZ2h0LnJlcGxhY2UoJ3B4JywgJycpXG5cdFx0XHQpICogMlxuXG5cdFx0dGhpcy5ib3VuZHMgPSB0aGlzLmdhbGxlcnlXcmFwcGVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG5cdFx0Ly8gdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLnRhcmdldCA9IDBcblx0XHR0aGlzLnNjcm9sbC5sYXN0ID0gdGhpcy5zY3JvbGwudGFyZ2V0ID1cblx0XHRcdC0odGhpcy5tZWRpYXNbMF0uZWxlbWVudC5jbGllbnRXaWR0aCArIHRoaXMuY29sdW1uR2FwKSAqIHRoaXMuaW5kZXhcblxuXHRcdG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiBtZWRpYS5vblJlc2l6ZShldmVudCwgdGhpcy5zY3JvbGwpKVxuXG5cdFx0dGhpcy5zY3JvbGwubGltaXQgPSB0aGlzLmJvdW5kcy53aWR0aCAtIHRoaXMubWVkaWFzWzBdLmVsZW1lbnQuY2xpZW50V2lkdGhcblx0fVxuXG5cdG9uVG91Y2hEb3duKHsgeCwgeSB9KSB7XG5cdFx0Ly8gdGhpcy5oYXNNb3ZlZCA9IHRydWVcblx0XHQvLyB0aGlzLnNjcm9sbC5sYXN0ID0gdGhpcy5zY3JvbGwuY3VycmVudFxuXHR9XG5cblx0b25Ub3VjaE1vdmUoeyB4LCB5IH0pIHtcblx0XHR0aGlzLmhhc01vdmVkID0gdHJ1ZVxuXHRcdGNvbnN0IGRpc3RhbmNlID0geC5zdGFydCAtIHguZW5kXG5cdFx0dGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwubGFzdCAtIGRpc3RhbmNlXG5cdH1cblxuXHRvblRvdWNoVXAoeyB4LCB5IH0pIHt9XG5cblx0b25XaGVlbCh7IHBpeGVsWSB9KSB7XG5cdFx0dGhpcy5oYXNNb3ZlZCA9IHRydWVcblx0XHR0aGlzLnNjcm9sbC50YXJnZXQgKz0gcGl4ZWxZXG5cdH1cblxuXHQvKipcblx0ICogQ2hhbmdlZFxuXHQgKi9cblx0b25DaGFuZ2UoaW5kZXgpIHtcblx0XHR0aGlzLmluZGV4ID0gaW5kZXhcblxuXHRcdGNvbnN0IHNlbGVjdGVkQ2F0ZWdvcnkgPSBwYXJzZUludChcblx0XHRcdHRoaXMubWVkaWFzRWxlbWVudHNbdGhpcy5pbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4Jylcblx0XHQpXG5cblx0XHRtYXAodGhpcy5jYXRlZ29yaWVzRWxlbWVudHMsIChlbGVtZW50LCBlbGVtZW50SW5kZXgpID0+IHtcblx0XHRcdGlmIChlbGVtZW50SW5kZXggPT09IHNlbGVjdGVkQ2F0ZWdvcnkpIHtcblx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuY2F0ZWdvcmllc0VsZW1lbnRzQWN0aXZlKVxuXHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQoXG5cdFx0XHRcdFx0YCR7dGhpcy5jYXRlZ29yaWVzRWxlbWVudHNDbGFzc30tLSR7ZWxlbWVudEluZGV4fWBcblx0XHRcdFx0KVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY2F0ZWdvcmllc0VsZW1lbnRzQWN0aXZlKVxuXHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXG5cdFx0XHRcdFx0YCR7dGhpcy5jYXRlZ29yaWVzRWxlbWVudHNDbGFzc30tLSR7ZWxlbWVudEluZGV4fWBcblx0XHRcdFx0KVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0bWFwKHRoaXMuaGVhZGVyVGl0bGVFbGVtZW50cywgKGVsZW1lbnQsIGVsZW1lbnRJbmRleCkgPT4ge1xuXHRcdFx0aWYgKGVsZW1lbnRJbmRleCA9PT0gdGhpcy5pbmRleCkge1xuXHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5oZWFkZXJUaXRsZUFjdGl2ZSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmhlYWRlclRpdGxlQWN0aXZlKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblxuXHQvKipcblx0ICogTG9vcFxuXHQgKi9cblxuXHR1cGRhdGUoKSB7XG5cdFx0dGhpcy5zcGVlZC50YXJnZXQgPSAodGhpcy5zY3JvbGwudGFyZ2V0IC0gdGhpcy5zY3JvbGwuY3VycmVudCkgKiAwLjAxXG5cblx0XHR0aGlzLnNwZWVkLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKFxuXHRcdFx0dGhpcy5zcGVlZC5jdXJyZW50LFxuXHRcdFx0dGhpcy5zcGVlZC50YXJnZXQsXG5cdFx0XHR0aGlzLnNwZWVkLmxlcnBcblx0XHQpXG5cblx0XHR0aGlzLnNjcm9sbC50YXJnZXQgPSBHU0FQLnV0aWxzLmNsYW1wKFxuXHRcdFx0LXRoaXMuc2Nyb2xsLmxpbWl0LFxuXHRcdFx0MCxcblx0XHRcdHRoaXMuc2Nyb2xsLnRhcmdldFxuXHRcdClcblxuXHRcdHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKFxuXHRcdFx0dGhpcy5zY3JvbGwuY3VycmVudCxcblx0XHRcdHRoaXMuc2Nyb2xsLnRhcmdldCxcblx0XHRcdHRoaXMuaGFzTW92ZWQgPyB0aGlzLnNjcm9sbC5sZXJwIDogMFxuXHRcdClcblxuXHRcdHRoaXMuZ2FsbGVyeUVsZW1lbnQuc3R5bGVbdGhpcy50cmFuc2Zvcm1QcmVmaXhdID0gYHRyYW5zbGF0ZVgoJHtcblx0XHRcdHRoaXMuaGFzTW92ZWQgPyB0aGlzLnNjcm9sbC5jdXJyZW50IDogMFxuXHRcdH1weClgXG5cblx0XHRpZiAodGhpcy5zY3JvbGwubGFzdCA8IHRoaXMuc2Nyb2xsLmN1cnJlbnQpIHtcblx0XHRcdHRoaXMuc2Nyb2xsLmRpcmVjdGlvbiA9ICdyaWdodCdcblx0XHR9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsLmxhc3QgPiB0aGlzLnNjcm9sbC5jdXJyZW50KSB7XG5cdFx0XHR0aGlzLnNjcm9sbC5kaXJlY3Rpb24gPSAnbGVmdCdcblx0XHR9XG5cblx0XHR0aGlzLnNjcm9sbC5sYXN0ID0gdGhpcy5zY3JvbGwuY3VycmVudFxuXG5cdFx0Y29uc3QgaW5kZXggPSBNYXRoLmZsb29yKFxuXHRcdFx0TWF0aC5hYnMoXG5cdFx0XHRcdCh0aGlzLnNjcm9sbC5jdXJyZW50IC0gdGhpcy5tZWRpYXNbMF0uYm91bmRzLndpZHRoIC8gMikgL1xuXHRcdFx0XHRcdHRoaXMuc2Nyb2xsLmxpbWl0XG5cdFx0XHQpICpcblx0XHRcdFx0KHRoaXMubWVkaWFzLmxlbmd0aCAtIDEpXG5cdFx0KVxuXG5cdFx0aWYgKHRoaXMuaW5kZXggIT09IGluZGV4KSB7XG5cdFx0XHR0aGlzLm9uQ2hhbmdlKGluZGV4KVxuXHRcdH1cblxuXHRcdG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiB7XG5cdFx0XHQvL1RPRE8gOiAgdGhpcyBpcyBmb3IgaW5maW5pdGUgc2Nyb2xsaW5nXG5cdFx0XHQvLyBjb25zdCBzY2FsZVggPSBtZWRpYS5tZXNoLnNjYWxlLnggLyAyXG5cblx0XHRcdC8vIGlmICh0aGlzLnNjcm9sbC5kaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuXHRcdFx0Ly8gXHRjb25zdCB4ID0gbWVkaWEubWVzaC5wb3NpdGlvbi54ICsgc2NhbGVYXG5cdFx0XHQvLyBcdGlmICh4IDwgLXRoaXMuc2l6ZXMud2lkdGggLyAyKSB7XG5cdFx0XHQvLyBcdFx0bWVkaWEuZXh0cmEueCArPSB0aGlzLndpZHRoXG5cdFx0XHQvLyBcdH1cblx0XHRcdC8vIH0gZWxzZSBpZiAodGhpcy5zY3JvbGwuZGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG5cdFx0XHQvLyBcdGNvbnN0IHggPSBtZWRpYS5tZXNoLnBvc2l0aW9uLnggLSBzY2FsZVhcblx0XHRcdC8vIFx0aWYgKHggPiB0aGlzLnNpemVzLndpZHRoIC8gMikge1xuXHRcdFx0Ly8gXHRcdG1lZGlhLmV4dHJhLnggLT0gdGhpcy53aWR0aFxuXHRcdFx0Ly8gXHR9XG5cdFx0XHQvLyB9XG5cblx0XHRcdG1lZGlhLnVwZGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLnNwZWVkLmN1cnJlbnQsIHRoaXMuaW5kZXgpXG5cdFx0fSlcblx0fVxuXG5cdC8qKlxuXHQgKiBEZXN0cm95XG5cdCAqL1xuXHRkZXN0cm95KCkge1xuXHRcdHRoaXMuc2NlbmUucmVtb3ZlQ2hpbGQodGhpcy5ncm91cClcblx0fVxufVxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiNDJmYjM3NTkwMDExZjMzY2FmN2NcIikiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJnbCIsInNjZW5lIiwic2l6ZXMiLCJpbmRleCIsInRoaXMiLCJpZCIsImdyb3VwIiwiVHJhbnNmb3JtIiwidHJhbnNmb3JtUHJlZml4IiwiUHJlZml4IiwiZ2FsbGVyeUVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnYWxsZXJ5V3JhcHBlckVsZW1lbnQiLCJjYXRlZ29yaWVzRWxlbWVudHNDbGFzcyIsImNhdGVnb3JpZXNFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjYXRlZ29yaWVzRWxlbWVudHNBY3RpdmUiLCJoZWFkZXJUaXRsZUNsYXNzIiwiaGVhZGVyVGl0bGVDaXJjbGVDbGFzcyIsImhlYWRlclRpdGxlRWxlbWVudHMiLCJoZWFkZXJUaXRsZUNpcmNsZUVsZW1lbnRzIiwiaGVhZGVyVGl0bGVBY3RpdmUiLCJtZWRpYXNFbGVtZW50cyIsIm1lZGlhc0xpbmsiLCJjb2x1bW5HYXAiLCJwYXJzZUZsb2F0Iiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIm1hcmdpblJpZ2h0IiwicmVwbGFjZSIsImhhc01vdmVkIiwiY3JlYXRlR2VvbWV0cnkiLCJjcmVhdGVHYWxsZXJ5Iiwic2Nyb2xsIiwiY3VycmVudCIsIm1lZGlhcyIsImVsZW1lbnQiLCJjbGllbnRXaWR0aCIsInRhcmdldCIsImxlcnAiLCJ2ZWxvY2l0eSIsInNwZWVkIiwib25SZXNpemUiLCJzZXRQYXJlbnQiLCJvbkNoYW5nZSIsInNob3ciLCJnZW9tZXRyeSIsIlBsYW5lIiwiaGVpZ2h0U2VnbWVudHMiLCJ3aWR0aFNlZ21lbnRzIiwibWFwIiwiTWVkaWEiLCJtZWRpYSIsImhpZGUiLCJldmVudCIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxhc3QiLCJsaW1pdCIsIndpZHRoIiwib25Ub3VjaERvd24iLCJ4IiwieSIsIm9uVG91Y2hNb3ZlIiwiZGlzdGFuY2UiLCJzdGFydCIsImVuZCIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJwaXhlbFkiLCJzZWxlY3RlZENhdGVnb3J5IiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJlbGVtZW50SW5kZXgiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ1cGRhdGUiLCJHU0FQIiwic3R5bGUiLCJkaXJlY3Rpb24iLCJNYXRoIiwiZmxvb3IiLCJhYnMiLCJsZW5ndGgiLCJkZXN0cm95IiwicmVtb3ZlQ2hpbGQiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=