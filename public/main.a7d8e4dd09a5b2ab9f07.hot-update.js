/*! For license information please see main.a7d8e4dd09a5b2ab9f07.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateportfolio_website("main",{"./src/components/Canvas/Works/index.js":(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var i=t("./node_modules/ogl/src/core/Transform.js"),l=t("./node_modules/ogl/src/extras/Plane.js"),r=t("./node_modules/gsap/index.js"),h=t("./node_modules/lodash/map.js"),a=t.n(h),o=t("./node_modules/prefix/index.js"),n=t.n(o),c=t("./src/components/Canvas/Works/Media.js");const d=class{constructor({gl:e,scene:s,sizes:t,index:l=0}){this.id="works",this.gl=e,this.scene=s,this.sizes=t,this.group=new i.Transform,this.transformPrefix=n()("transform"),this.galleryElement=document.querySelector(".works__gallery"),this.galleryWrapperElement=document.querySelector(".works__gallery__wrapper"),this.categoriesElementsClass="works__category__wrapper",this.categoriesElements=document.querySelectorAll(`.${this.categoriesElementsClass}`),this.categoriesElementsActive=`${this.categoriesElementsClass}--active`,this.headerTitleClass="works__header__title__wrapper__outer",this.headerTitleCircleClass="works__header__title__circle",this.headerTitleElements=document.querySelectorAll(`.${this.headerTitleClass}`),this.headerTitleCircleElements=document.querySelectorAll(`.${this.headerTitleCircleClass}`),this.headerTitleActive=`${this.headerTitleClass}--active`,this.mediasElements=document.querySelectorAll(".works__gallery__media"),this.mediasLink=document.querySelectorAll(".works__gallery__link"),this.columnGap=2*parseFloat(window.getComputedStyle(this.mediasLink[0]).marginRight.replace("px","")),this.index=l,this.hasMoved=!1,this.createGeometry(),this.createGallery(),this.scroll={current:-(this.medias[0].element.clientWidth+this.columnGap)*this.index,target:-(this.medias[0].element.clientWidth+this.columnGap)*this.index,lerp:.1,velocity:1},this.speed={current:0,target:0,lerp:.1},this.onResize({sizes:this.sizes}),this.group.setParent(this.scene),this.onChange(this.index),this.show()}createGeometry(){this.geometry=new l.Plane(this.gl,{heightSegments:20,widthSegments:20})}createGallery(){this.medias=a()(this.mediasElements,((e,s)=>new c.default({element:e,geometry:this.geometry,index:s,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){a()(this.medias,(e=>e.show()))}hide(){a()(this.medias,(e=>e.hide()))}onResize(e){this.sizes=e.sizes,this.columnGap=2*parseFloat(window.getComputedStyle(this.mediasLink[0]).marginRight.replace("px","")),this.bounds=this.galleryWrapperElement.getBoundingClientRect(),this.scroll.last=this.scroll.target=-(this.medias[0].element.clientWidth+this.columnGap)*this.index,a()(this.medias,(s=>s.onResize(e,this.scroll))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:e,y:s}){}onTouchMove({x:e,y:s}){this.hasMoved=!0;const t=e.start-e.end;this.scroll.target=this.scroll.last-t}onTouchUp({x:e,y:s}){}onWheel({pixelY:e}){this.hasMoved=!0,this.scroll.target+=e}onChange(e){this.index=e;const s=parseInt(this.mediasElements[this.index].getAttribute("data-index"));a()(this.categoriesElements,((e,t)=>{t===s?(e.classList.add(this.categoriesElementsActive),e.classList.add(`${this.categoriesElementsClass}--${t}`)):(e.classList.remove(this.categoriesElementsActive),e.classList.remove(`${this.categoriesElementsClass}--${t}`))})),a()(this.headerTitleElements,((e,s)=>{s===this.index?e.classList.add(this.headerTitleActive):e.classList.remove(this.headerTitleActive)}))}update(){this.speed.target=.01*(this.scroll.target-this.scroll.current),this.speed.current=r.default.utils.interpolate(this.speed.current,this.speed.target,this.speed.lerp),this.scroll.target=r.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=r.default.utils.interpolate(this.scroll.current,this.scroll.target,this.hasMoved?this.scroll.lerp:0),this.galleryElement.style[this.transformPrefix]=`translateX(${this.hasMoved?this.scroll.current:0}px)`,this.scroll.last<this.scroll.current?this.scroll.direction="right":this.scroll.last>this.scroll.current&&(this.scroll.direction="left"),this.scroll.last=this.scroll.current;const e=Math.floor(Math.abs((this.scroll.current-this.medias[0].bounds.width/2)/this.scroll.limit)*(this.medias.length-1));this.index!==e&&this.onChange(e),a()(this.medias,(e=>{e.update(this.scroll.current,this.speed.current,this.index)}))}destroy(){this.scene.removeChild(this.group)}}}},(function(e){e.h=()=>"df153316c0c0ab26ae82"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTL0IsS0FBS0QsTUFBM0QsR0FFRCxDQUtEbUYsVUFDQ2xGLEtBQUtILE1BQU1zRixZQUFZbkYsS0FBS0UsTUFDNUIsa0JDblFGa0YsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby13ZWJzaXRlLy4vc3JjL2NvbXBvbmVudHMvQ2FudmFzL1dvcmtzL2luZGV4LmpzIiwid2VicGFjazovL3BvcnRmb2xpby13ZWJzaXRlL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJ1xuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcbmltcG9ydCBtYXAgZnJvbSAnbG9kYXNoL21hcCdcbmltcG9ydCBQcmVmaXggZnJvbSAncHJlZml4J1xuXG5pbXBvcnQgTWVkaWEgZnJvbSAnLi9NZWRpYSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuXHRjb25zdHJ1Y3Rvcih7IGdsLCBzY2VuZSwgc2l6ZXMsIGluZGV4ID0gMCB9KSB7XG5cdFx0dGhpcy5pZCA9ICd3b3Jrcydcblx0XHR0aGlzLmdsID0gZ2xcblx0XHR0aGlzLnNjZW5lID0gc2NlbmVcblx0XHR0aGlzLnNpemVzID0gc2l6ZXNcblxuXHRcdHRoaXMuZ3JvdXAgPSBuZXcgVHJhbnNmb3JtKClcblxuXHRcdHRoaXMudHJhbnNmb3JtUHJlZml4ID0gUHJlZml4KCd0cmFuc2Zvcm0nKVxuXG5cdFx0dGhpcy5nYWxsZXJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc19fZ2FsbGVyeScpXG5cdFx0dGhpcy5nYWxsZXJ5V3JhcHBlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0Jy53b3Jrc19fZ2FsbGVyeV9fd3JhcHBlcidcblx0XHQpXG5cblx0XHR0aGlzLmNhdGVnb3JpZXNFbGVtZW50c0NsYXNzID0gJ3dvcmtzX19jYXRlZ29yeV9fd3JhcHBlcidcblx0XHR0aGlzLmNhdGVnb3JpZXNFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHRgLiR7dGhpcy5jYXRlZ29yaWVzRWxlbWVudHNDbGFzc31gXG5cdFx0KVxuXHRcdHRoaXMuY2F0ZWdvcmllc0VsZW1lbnRzQWN0aXZlID0gYCR7dGhpcy5jYXRlZ29yaWVzRWxlbWVudHNDbGFzc30tLWFjdGl2ZWBcblxuXHRcdHRoaXMuaGVhZGVyVGl0bGVDbGFzcyA9ICd3b3Jrc19faGVhZGVyX190aXRsZV9fd3JhcHBlcl9fb3V0ZXInXG5cdFx0dGhpcy5oZWFkZXJUaXRsZUNpcmNsZUNsYXNzID0gJ3dvcmtzX19oZWFkZXJfX3RpdGxlX19jaXJjbGUnXG5cdFx0dGhpcy5oZWFkZXJUaXRsZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcblx0XHRcdGAuJHt0aGlzLmhlYWRlclRpdGxlQ2xhc3N9YFxuXHRcdClcblx0XHR0aGlzLmhlYWRlclRpdGxlQ2lyY2xlRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0YC4ke3RoaXMuaGVhZGVyVGl0bGVDaXJjbGVDbGFzc31gXG5cdFx0KVxuXHRcdHRoaXMuaGVhZGVyVGl0bGVBY3RpdmUgPSBgJHt0aGlzLmhlYWRlclRpdGxlQ2xhc3N9LS1hY3RpdmVgXG5cblx0XHR0aGlzLm1lZGlhc0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndvcmtzX19nYWxsZXJ5X19tZWRpYScpXG5cdFx0dGhpcy5tZWRpYXNMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndvcmtzX19nYWxsZXJ5X19saW5rJylcblxuXHRcdC8vVE9ETzogYWRkIGNhc2UgZm9yIElFLCBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNDI3NTMwNC9ob3ctdG8tZ2V0LW1hcmdpbi12YWx1ZS1vZi1hLWRpdi1pbi1wbGFpbi1qYXZhc2NyaXB0XG5cdFx0dGhpcy5jb2x1bW5HYXAgPVxuXHRcdFx0cGFyc2VGbG9hdChcblx0XHRcdFx0d2luZG93XG5cdFx0XHRcdFx0LmdldENvbXB1dGVkU3R5bGUodGhpcy5tZWRpYXNMaW5rWzBdKVxuXHRcdFx0XHRcdC5tYXJnaW5SaWdodC5yZXBsYWNlKCdweCcsICcnKVxuXHRcdFx0KSAqIDJcblxuXHRcdHRoaXMuaW5kZXggPSBpbmRleFxuXHRcdHRoaXMuaGFzTW92ZWQgPSBmYWxzZVxuXG5cdFx0dGhpcy5jcmVhdGVHZW9tZXRyeSgpXG5cdFx0dGhpcy5jcmVhdGVHYWxsZXJ5KClcblxuXHRcdHRoaXMuc2Nyb2xsID0ge1xuXHRcdFx0Y3VycmVudDpcblx0XHRcdFx0LSh0aGlzLm1lZGlhc1swXS5lbGVtZW50LmNsaWVudFdpZHRoICsgdGhpcy5jb2x1bW5HYXApICogdGhpcy5pbmRleCxcblx0XHRcdHRhcmdldDpcblx0XHRcdFx0LSh0aGlzLm1lZGlhc1swXS5lbGVtZW50LmNsaWVudFdpZHRoICsgdGhpcy5jb2x1bW5HYXApICogdGhpcy5pbmRleCxcblx0XHRcdGxlcnA6IDAuMSxcblx0XHRcdHZlbG9jaXR5OiAxLFxuXHRcdH1cblxuXHRcdHRoaXMuc3BlZWQgPSB7XG5cdFx0XHRjdXJyZW50OiAwLFxuXHRcdFx0dGFyZ2V0OiAwLFxuXHRcdFx0bGVycDogMC4xLFxuXHRcdH1cblxuXHRcdHRoaXMub25SZXNpemUoeyBzaXplczogdGhpcy5zaXplcyB9KVxuXG5cdFx0dGhpcy5ncm91cC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcblx0XHR0aGlzLm9uQ2hhbmdlKHRoaXMuaW5kZXgpXG5cblx0XHR0aGlzLnNob3coKVxuXHR9XG5cblx0Y3JlYXRlR2VvbWV0cnkoKSB7XG5cdFx0dGhpcy5nZW9tZXRyeSA9IG5ldyBQbGFuZSh0aGlzLmdsLCB7XG5cdFx0XHRoZWlnaHRTZWdtZW50czogMjAsXG5cdFx0XHR3aWR0aFNlZ21lbnRzOiAyMCxcblx0XHR9KVxuXHR9XG5cblx0Y3JlYXRlR2FsbGVyeSgpIHtcblx0XHR0aGlzLm1lZGlhcyA9IG1hcCh0aGlzLm1lZGlhc0VsZW1lbnRzLCAoZWxlbWVudCwgaW5kZXgpID0+IHtcblx0XHRcdHJldHVybiBuZXcgTWVkaWEoe1xuXHRcdFx0XHRlbGVtZW50LFxuXHRcdFx0XHRnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcblx0XHRcdFx0aW5kZXgsXG5cdFx0XHRcdGdsOiB0aGlzLmdsLFxuXHRcdFx0XHRzY2VuZTogdGhpcy5ncm91cCxcblx0XHRcdFx0c2l6ZXM6IHRoaXMuc2l6ZXMsXG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHQvKipcblx0ICogQW5pbWF0aW9uc1xuXHQgKi9cblx0c2hvdygpIHtcblx0XHRtYXAodGhpcy5tZWRpYXMsIChtZWRpYSkgPT4gbWVkaWEuc2hvdygpKVxuXHR9XG5cblx0aGlkZSgpIHtcblx0XHRtYXAodGhpcy5tZWRpYXMsIChtZWRpYSkgPT4gbWVkaWEuaGlkZSgpKVxuXHR9XG5cblx0LyoqXG5cdCAqIEV2ZW50c1xuXHQgKi9cblxuXHRvblJlc2l6ZShldmVudCkge1xuXHRcdHRoaXMuc2l6ZXMgPSBldmVudC5zaXplc1xuXG5cdFx0dGhpcy5jb2x1bW5HYXAgPVxuXHRcdFx0cGFyc2VGbG9hdChcblx0XHRcdFx0d2luZG93XG5cdFx0XHRcdFx0LmdldENvbXB1dGVkU3R5bGUodGhpcy5tZWRpYXNMaW5rWzBdKVxuXHRcdFx0XHRcdC5tYXJnaW5SaWdodC5yZXBsYWNlKCdweCcsICcnKVxuXHRcdFx0KSAqIDJcblxuXHRcdHRoaXMuYm91bmRzID0gdGhpcy5nYWxsZXJ5V3JhcHBlckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuXHRcdC8vIHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC50YXJnZXQgPSAwXG5cdFx0dGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLnRhcmdldCA9XG5cdFx0XHQtKHRoaXMubWVkaWFzWzBdLmVsZW1lbnQuY2xpZW50V2lkdGggKyB0aGlzLmNvbHVtbkdhcCkgKiB0aGlzLmluZGV4XG5cblx0XHRtYXAodGhpcy5tZWRpYXMsIChtZWRpYSkgPT4gbWVkaWEub25SZXNpemUoZXZlbnQsIHRoaXMuc2Nyb2xsKSlcblxuXHRcdHRoaXMuc2Nyb2xsLmxpbWl0ID0gdGhpcy5ib3VuZHMud2lkdGggLSB0aGlzLm1lZGlhc1swXS5lbGVtZW50LmNsaWVudFdpZHRoXG5cdH1cblxuXHRvblRvdWNoRG93bih7IHgsIHkgfSkge1xuXHRcdC8vIHRoaXMuaGFzTW92ZWQgPSB0cnVlXG5cdFx0Ly8gdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLmN1cnJlbnRcblx0fVxuXG5cdG9uVG91Y2hNb3ZlKHsgeCwgeSB9KSB7XG5cdFx0dGhpcy5oYXNNb3ZlZCA9IHRydWVcblx0XHRjb25zdCBkaXN0YW5jZSA9IHguc3RhcnQgLSB4LmVuZFxuXHRcdHRoaXMuc2Nyb2xsLnRhcmdldCA9IHRoaXMuc2Nyb2xsLmxhc3QgLSBkaXN0YW5jZVxuXHR9XG5cblx0b25Ub3VjaFVwKHsgeCwgeSB9KSB7fVxuXG5cdG9uV2hlZWwoeyBwaXhlbFkgfSkge1xuXHRcdHRoaXMuaGFzTW92ZWQgPSB0cnVlXG5cdFx0dGhpcy5zY3JvbGwudGFyZ2V0ICs9IHBpeGVsWVxuXHR9XG5cblx0LyoqXG5cdCAqIENoYW5nZWRcblx0ICovXG5cdG9uQ2hhbmdlKGluZGV4KSB7XG5cdFx0dGhpcy5pbmRleCA9IGluZGV4XG5cblx0XHRjb25zdCBzZWxlY3RlZENhdGVnb3J5ID0gcGFyc2VJbnQoXG5cdFx0XHR0aGlzLm1lZGlhc0VsZW1lbnRzW3RoaXMuaW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcpXG5cdFx0KVxuXG5cdFx0bWFwKHRoaXMuY2F0ZWdvcmllc0VsZW1lbnRzLCAoZWxlbWVudCwgZWxlbWVudEluZGV4KSA9PiB7XG5cdFx0XHRpZiAoZWxlbWVudEluZGV4ID09PSBzZWxlY3RlZENhdGVnb3J5KSB7XG5cdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmNhdGVnb3JpZXNFbGVtZW50c0FjdGl2ZSlcblx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKFxuXHRcdFx0XHRcdGAke3RoaXMuY2F0ZWdvcmllc0VsZW1lbnRzQ2xhc3N9LS0ke2VsZW1lbnRJbmRleH1gXG5cdFx0XHRcdClcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNhdGVnb3JpZXNFbGVtZW50c0FjdGl2ZSlcblx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFxuXHRcdFx0XHRcdGAke3RoaXMuY2F0ZWdvcmllc0VsZW1lbnRzQ2xhc3N9LS0ke2VsZW1lbnRJbmRleH1gXG5cdFx0XHRcdClcblx0XHRcdH1cblx0XHR9KVxuXHRcdG1hcCh0aGlzLmhlYWRlclRpdGxlRWxlbWVudHMsIChlbGVtZW50LCBlbGVtZW50SW5kZXgpID0+IHtcblx0XHRcdGlmIChlbGVtZW50SW5kZXggPT09IHRoaXMuaW5kZXgpIHtcblx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuaGVhZGVyVGl0bGVBY3RpdmUpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5oZWFkZXJUaXRsZUFjdGl2ZSlcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0LyoqXG5cdCAqIExvb3Bcblx0ICovXG5cblx0dXBkYXRlKCkge1xuXHRcdHRoaXMuc3BlZWQudGFyZ2V0ID0gKHRoaXMuc2Nyb2xsLnRhcmdldCAtIHRoaXMuc2Nyb2xsLmN1cnJlbnQpICogMC4wMVxuXG5cdFx0dGhpcy5zcGVlZC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZShcblx0XHRcdHRoaXMuc3BlZWQuY3VycmVudCxcblx0XHRcdHRoaXMuc3BlZWQudGFyZ2V0LFxuXHRcdFx0dGhpcy5zcGVlZC5sZXJwXG5cdFx0KVxuXG5cdFx0dGhpcy5zY3JvbGwudGFyZ2V0ID0gR1NBUC51dGlscy5jbGFtcChcblx0XHRcdC10aGlzLnNjcm9sbC5saW1pdCxcblx0XHRcdDAsXG5cdFx0XHR0aGlzLnNjcm9sbC50YXJnZXRcblx0XHQpXG5cblx0XHR0aGlzLnNjcm9sbC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZShcblx0XHRcdHRoaXMuc2Nyb2xsLmN1cnJlbnQsXG5cdFx0XHR0aGlzLnNjcm9sbC50YXJnZXQsXG5cdFx0XHR0aGlzLmhhc01vdmVkID8gdGhpcy5zY3JvbGwubGVycCA6IDBcblx0XHQpXG5cblx0XHR0aGlzLmdhbGxlcnlFbGVtZW50LnN0eWxlW3RoaXMudHJhbnNmb3JtUHJlZml4XSA9IGB0cmFuc2xhdGVYKCR7XG5cdFx0XHR0aGlzLmhhc01vdmVkID8gdGhpcy5zY3JvbGwuY3VycmVudCA6IDBcblx0XHR9cHgpYFxuXG5cdFx0aWYgKHRoaXMuc2Nyb2xsLmxhc3QgPCB0aGlzLnNjcm9sbC5jdXJyZW50KSB7XG5cdFx0XHR0aGlzLnNjcm9sbC5kaXJlY3Rpb24gPSAncmlnaHQnXG5cdFx0fSBlbHNlIGlmICh0aGlzLnNjcm9sbC5sYXN0ID4gdGhpcy5zY3JvbGwuY3VycmVudCkge1xuXHRcdFx0dGhpcy5zY3JvbGwuZGlyZWN0aW9uID0gJ2xlZnQnXG5cdFx0fVxuXG5cdFx0dGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLmN1cnJlbnRcblxuXHRcdGNvbnN0IGluZGV4ID0gTWF0aC5mbG9vcihcblx0XHRcdE1hdGguYWJzKFxuXHRcdFx0XHQodGhpcy5zY3JvbGwuY3VycmVudCAtIHRoaXMubWVkaWFzWzBdLmJvdW5kcy53aWR0aCAvIDIpIC9cblx0XHRcdFx0XHR0aGlzLnNjcm9sbC5saW1pdFxuXHRcdFx0KSAqXG5cdFx0XHRcdCh0aGlzLm1lZGlhcy5sZW5ndGggLSAxKVxuXHRcdClcblxuXHRcdGlmICh0aGlzLmluZGV4ICE9PSBpbmRleCkge1xuXHRcdFx0dGhpcy5vbkNoYW5nZShpbmRleClcblx0XHR9XG5cblx0XHRtYXAodGhpcy5tZWRpYXMsIChtZWRpYSkgPT4ge1xuXHRcdFx0Ly9UT0RPIDogIHRoaXMgaXMgZm9yIGluZmluaXRlIHNjcm9sbGluZ1xuXHRcdFx0Ly8gY29uc3Qgc2NhbGVYID0gbWVkaWEubWVzaC5zY2FsZS54IC8gMlxuXG5cdFx0XHQvLyBpZiAodGhpcy5zY3JvbGwuZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcblx0XHRcdC8vIFx0Y29uc3QgeCA9IG1lZGlhLm1lc2gucG9zaXRpb24ueCArIHNjYWxlWFxuXHRcdFx0Ly8gXHRpZiAoeCA8IC10aGlzLnNpemVzLndpZHRoIC8gMikge1xuXHRcdFx0Ly8gXHRcdG1lZGlhLmV4dHJhLnggKz0gdGhpcy53aWR0aFxuXHRcdFx0Ly8gXHR9XG5cdFx0XHQvLyB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsLmRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xuXHRcdFx0Ly8gXHRjb25zdCB4ID0gbWVkaWEubWVzaC5wb3NpdGlvbi54IC0gc2NhbGVYXG5cdFx0XHQvLyBcdGlmICh4ID4gdGhpcy5zaXplcy53aWR0aCAvIDIpIHtcblx0XHRcdC8vIFx0XHRtZWRpYS5leHRyYS54IC09IHRoaXMud2lkdGhcblx0XHRcdC8vIFx0fVxuXHRcdFx0Ly8gfVxuXG5cdFx0XHRtZWRpYS51cGRhdGUodGhpcy5zY3JvbGwuY3VycmVudCwgdGhpcy5zcGVlZC5jdXJyZW50LCB0aGlzLmluZGV4KVxuXHRcdH0pXG5cdH1cblxuXHQvKipcblx0ICogRGVzdHJveVxuXHQgKi9cblx0ZGVzdHJveSgpIHtcblx0XHR0aGlzLnNjZW5lLnJlbW92ZUNoaWxkKHRoaXMuZ3JvdXApXG5cdH1cbn1cbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcImRmMTUzMzE2YzBjMGFiMjZhZTgyXCIpIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiZ2wiLCJzY2VuZSIsInNpemVzIiwiaW5kZXgiLCJ0aGlzIiwiaWQiLCJncm91cCIsIlRyYW5zZm9ybSIsInRyYW5zZm9ybVByZWZpeCIsIlByZWZpeCIsImdhbGxlcnlFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2FsbGVyeVdyYXBwZXJFbGVtZW50IiwiY2F0ZWdvcmllc0VsZW1lbnRzQ2xhc3MiLCJjYXRlZ29yaWVzRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2F0ZWdvcmllc0VsZW1lbnRzQWN0aXZlIiwiaGVhZGVyVGl0bGVDbGFzcyIsImhlYWRlclRpdGxlQ2lyY2xlQ2xhc3MiLCJoZWFkZXJUaXRsZUVsZW1lbnRzIiwiaGVhZGVyVGl0bGVDaXJjbGVFbGVtZW50cyIsImhlYWRlclRpdGxlQWN0aXZlIiwibWVkaWFzRWxlbWVudHMiLCJtZWRpYXNMaW5rIiwiY29sdW1uR2FwIiwicGFyc2VGbG9hdCIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJtYXJnaW5SaWdodCIsInJlcGxhY2UiLCJoYXNNb3ZlZCIsImNyZWF0ZUdlb21ldHJ5IiwiY3JlYXRlR2FsbGVyeSIsInNjcm9sbCIsImN1cnJlbnQiLCJtZWRpYXMiLCJlbGVtZW50IiwiY2xpZW50V2lkdGgiLCJ0YXJnZXQiLCJsZXJwIiwidmVsb2NpdHkiLCJzcGVlZCIsIm9uUmVzaXplIiwic2V0UGFyZW50Iiwib25DaGFuZ2UiLCJzaG93IiwiZ2VvbWV0cnkiLCJQbGFuZSIsImhlaWdodFNlZ21lbnRzIiwid2lkdGhTZWdtZW50cyIsIm1hcCIsIk1lZGlhIiwibWVkaWEiLCJoaWRlIiwiZXZlbnQiLCJib3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsYXN0IiwibGltaXQiLCJ3aWR0aCIsIm9uVG91Y2hEb3duIiwieCIsInkiLCJvblRvdWNoTW92ZSIsImRpc3RhbmNlIiwic3RhcnQiLCJlbmQiLCJvblRvdWNoVXAiLCJvbldoZWVsIiwicGl4ZWxZIiwic2VsZWN0ZWRDYXRlZ29yeSIsInBhcnNlSW50IiwiZ2V0QXR0cmlidXRlIiwiZWxlbWVudEluZGV4IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwidXBkYXRlIiwiR1NBUCIsInN0eWxlIiwiZGlyZWN0aW9uIiwiTWF0aCIsImZsb29yIiwiYWJzIiwibGVuZ3RoIiwiZGVzdHJveSIsInJlbW92ZUNoaWxkIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9